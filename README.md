#RAICAR 

__RAICAR__ (Ranking and Averaging Independent Component Analysis by Reproducibility) is a method to improve the ICA analysis for fMRI (Functional Magnetic Resonance Imaging) data. The method is implemented in MATLAB7.1, and is available for free download.

##Installation and Usage Instruction

_Installation:_

Just make sure the RAICAR package and its sub-folders are in the search path of MATLAB.
You may add the path using:
```matlab
addpath (genpath ('path_to_RAICAR'));
```

_Usage:_

```matlab
	[subj] = raicar_controller (subj)
```
_subj_ is a structure containing all the input options. see the following:

Input:

- RAICAR requires two input data files and several parameters. The two required data files are: a preprocessed functional data (4-Dimensional) and a binary mask (3-Dimensional, indicating which voxels to include in the analysis), both in NIFTI/ANALYZE (.nii or .hdr/.img) format.

- RAICAR provides a template configuration file startRAICAR.m with detailed instructions. It is a good idea to copy and modify this file to startup your own analysis.

Output:

- RAICAR will automatically save the resultant component maps into a NIFTI file (called outPrefix_aveMap.nii, where the outPrefix is a user specified name), which can be visualized in AFNI; 
	
- RAICAR will automatically save the resultant component mixing time courses in a text file (called outPrefix_aveTc.txt, where the outPrefix is a user specified name);

- RAICAR will generate a html-based report, if you checked the corresponding option in your configuration file. The report will be in a sub-directory webreport (or webreport1, if the original one existed). You can direct your web browser to working-directory/webreport/00_index.html to browse all the results.

- RAICAR will return an object containing all the setup information and results. We strongly recommend that you save it into a Matlab .mat file. 

- RAICAR will save each ICA decomposition result into a Matlab .mat file, named outPrefix_ICA?.mat where the outPrefix is a user specified name and ? is an index number. 

- RAICAR will save the generated CRCM file, outPrefix_crcm.mat, for backup, since the processing takes some time.

##Documentation:

See startRAICAR.m;
All the files in RAICAR are self-documented.

##Technical Notes
RAICAR conducts multiple ICA decomposition with different initial guesses as well as bootstrapped data. By aligning the pooled components and ranking them by reproducibility, RAICAR is able to obtain a reproducibility rank of the components, based on which the number of reproducible/important components can be inspected. The final component maps and mixing matrices are generated by averaging results from the repeated ICA compositions, improving the stability and accuracy of the estimation. For more detail, please refer to our publication on Human Brain Mapping. 

##Copyright Notes
We redistribute the following codes with RAICAR under GPL. The copyrights belong to their original authors:

- A slightly modified version of FastICA package (Hyv√§nen, 1999; http://www.cis.hut.fi/projects/ica/fastica) with RAICAR. It will appear in a sub-directory called fastica. 

- Several functions from Jimmy Chens Tools for NIfTI (ANALYZE) MR image (http://www.mathworks.com/matlabcentral/fileexchange/loadFile.do?objectId=8797&objectType=File) to read and write NIFTI (ANALYZE) format file.

##Reference##
If you use RAICAR for any purpose, please consider to cite the following publication:

Zhi Yang, Stephen LaConte, Xuchu Weng, and Xiaoping Hu (2007): Ranking and Averaging Independent Component Analysis by Reproducibility. Human Brain Mapping 29(6): 711-725.